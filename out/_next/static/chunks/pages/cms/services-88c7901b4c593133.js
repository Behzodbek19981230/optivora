(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[835],{6216:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var r=n(3366),i=n(7462),o=n(7294),a=n(4128),l=n(9766),s=n(4780),d=n(4867),c=n(7874),u=n(1607),p=n(7893),m=n(6567),x=n(6663),h=n(976),Z=n(5893);let j=["component","direction","spacing","divider","children","className","useFlexGap"],g=(0,m.Z)(),f=(0,c.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function v(e){return(0,u.Z)({props:e,name:"MuiStack",defaultTheme:g})}let b=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],y=({ownerState:e,theme:t})=>{let n=(0,i.Z)({display:"flex",flexDirection:"column"},(0,x.k9)({theme:t},(0,x.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let r=(0,h.hB)(t),i=Object.keys(t.breakpoints.values).reduce((t,n)=>(("object"==typeof e.spacing&&null!=e.spacing[n]||"object"==typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t),{}),o=(0,x.P$)({values:e.direction,base:i}),a=(0,x.P$)({values:e.spacing,base:i});"object"==typeof o&&Object.keys(o).forEach((e,t,n)=>{let r=o[e];if(!r){let r=t>0?o[n[t-1]]:"column";o[e]=r}});let s=(t,n)=>e.useFlexGap?{gap:(0,h.NA)(r,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${b(n?o[n]:e.direction)}`]:(0,h.NA)(r,t)}};n=(0,l.Z)(n,(0,x.k9)({theme:t},a,s))}return(0,x.dt)(t.breakpoints,n)};var _=n(948),M=n(1657);let S=function(e={}){let{createStyledComponent:t=f,useThemeProps:n=v,componentName:l="MuiStack"}=e,c=()=>(0,s.Z)({root:["root"]},e=>(0,d.Z)(l,e),{}),u=t(y),m=o.forwardRef(function(e,t){let l=n(e),s=(0,p.Z)(l),{component:d="div",direction:m="column",spacing:x=0,divider:h,children:g,className:f,useFlexGap:v=!1}=s,b=(0,r.Z)(s,j),y=c();return(0,Z.jsx)(u,(0,i.Z)({as:d,ownerState:{direction:m,spacing:x,useFlexGap:v},ref:t,className:(0,a.Z)(y.root,f)},b,{children:h?function(e,t){let n=o.Children.toArray(e).filter(Boolean);return n.reduce((e,r,i)=>(e.push(r),i<n.length-1&&e.push(o.cloneElement(t,{key:`separator-${i}`})),e),[])}(g,h):g}))});return m}({createStyledComponent:(0,_.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,M.Z)({props:e,name:"MuiStack"})});var z=S},2882:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(7462),i=n(3366),o=n(7294),a=n(6010),l=n(4780),s=n(1657),d=n(948),c=n(1588),u=n(4867);function p(e){return(0,u.Z)("MuiTableContainer",e)}(0,c.Z)("MuiTableContainer",["root"]);var m=n(5893);let x=["className","component"],h=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"]},p,t)},Z=(0,d.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),j=o.forwardRef(function(e,t){let n=(0,s.Z)({props:e,name:"MuiTableContainer"}),{className:o,component:l="div"}=n,d=(0,i.Z)(n,x),c=(0,r.Z)({},n,{component:l}),u=h(c);return(0,m.jsx)(Z,(0,r.Z)({ref:t,as:l,className:(0,a.Z)(u.root,o),ownerState:c},d))});var g=j},7874:function(e,t,n){"use strict";var r=n(9852);let i=(0,r.ZP)();t.Z=i},3929:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cms/services",function(){return n(9972)}])},6456:function(e,t,n){"use strict";var r=n(5893),i=n(7294),o=n(948),a=n(1903);let l=(0,o.ZP)(a.Z)(e=>{let{theme:t}=e;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:t.spacing(1),fontSize:t.typography.body2.fontSize,color:"".concat(t.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(t.palette.customColors.main,", 0.2)"),transition:t.transitions.create(["border-color","box-shadow"],{duration:t.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(t.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:t.palette.error.main},"&.Mui-focused":{boxShadow:t.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:t.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:t.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:t.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:t.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:t.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:t.palette.error.main},"&.Mui-error":{borderColor:t.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(t.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:t.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:t.spacing(1,0,0),color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize,"&.Mui-error":{color:t.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:11,"&:after":{fontSize:"1.6rem !important"}}}}),s=(0,i.forwardRef)((e,t)=>{let{size:n="small",InputLabelProps:i,...o}=e;return(0,r.jsx)(l,{size:n,inputRef:t,...o,variant:"filled",InputLabelProps:{...i,shrink:!0}})});t.Z=s},1846:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(6976),i=n(871);function o(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=async e=>{let[t,n]=e,r=await i.D.get(t,n);return r.data},{data:l,error:s,isLoading:d,mutate:c}=(0,r.ZP)(e?[e,n]:null,a,{revalidateOnFocus:!1,keepPreviousData:!0,...o});return console.log("payload",l),{data:(null==l?void 0:l.results)||[],total:(null==l?void 0:null===(t=l.pagination)||void 0===t?void 0:t.total)||0,loading:!!d,error:s,mutate:c,raw:l}}},9972:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(5893),i=n(7294),o=n(6242),a=n(8445),l=n(7906),s=n(295),d=n(3252),c=n(2882),u=n(3184),p=n(3816),m=n(3946),x=n(3321),h=n(6216),Z=n(4386),j=n(4640),g=n(871),f=n(7536),v=n(657),b=n(7645),y=n(6580),_=n(1425),M=n(6886),S=n(6456),z=n(1846),C=n(9702),P=n(7918),w=n(6501);let k={name:"",name_en:"",name_uz:"",name_ru:"",slug:"",short_description:"",short_description_en:"",short_description_uz:"",short_description_ru:"",description:"",description_en:"",description_uz:"",description_ru:"",icon:null,industries:[],equipment_categories:[],order_index:0},B=e=>{let{open:t,onClose:n,onSaved:o,mode:a,item:l}=e,{control:s,handleSubmit:d,reset:c,setValue:u,watch:p,formState:{isSubmitting:m}}=(0,f.cI)({defaultValues:k}),{data:h}=(0,z.z)(j.Z.industries,{perPage:100}),{data:Z}=(0,z.z)(j.Z.equipmentCategories,{perPage:100}),[B,I]=(0,i.useState)(null);(0,i.useEffect)(()=>{"edit"===a&&l?(c({...l,icon:null}),I("string"==typeof l.icon?l.icon:null)):"create"===a&&(c(k),I(null))},[a,l,c]);let q=e=>{var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0];u("icon",n),n&&I(URL.createObjectURL(n))},R=async e=>{let t=new FormData;Object.entries(e).forEach(e=>{let[n,r]=e;"icon"===n&&r?t.append("icon",r):Array.isArray(r)?r.forEach(e=>t.append(n,String(e))):null!=r&&t.append(n,String(r))});try{"create"===a?await g.D.postForm(j.Z.services,t):"edit"===a&&l&&await g.D.putForm(j.Z.serviceById(l.id),t),o(),n()}catch(e){console.error("Failed to save service:",e),w.ZP.error("Xizmatni saqlashda xatolik yuz berdi")}};return(0,r.jsxs)(v.Z,{open:t,onClose:m?void 0:n,fullWidth:!0,maxWidth:"md",children:[(0,r.jsx)(b.Z,{children:"create"===a?"Xizmat qo‘shish":"Xizmatni tahrirlash"}),(0,r.jsxs)("form",{onSubmit:d(R),children:[(0,r.jsx)(y.Z,{children:(0,r.jsxs)(M.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"name_en",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"Nomi (EN)",...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"name_uz",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"Nomi (UZ)",...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"name_ru",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"Nomi (RU)",...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"slug",control:s,rules:{required:!0},render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"Slug",...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"order_index",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,type:"number",label:"Tartib raqami",...t,inputProps:{min:0}})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"short_description_en",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"Qisqa tavsif (EN)",multiline:!0,minRows:2,...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"short_description_uz",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"Qisqa tavsif (UZ)",multiline:!0,minRows:2,...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"short_description_ru",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"Qisqa tavsif (RU)",multiline:!0,minRows:2,...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"description_en",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"To‘liq tavsif (EN)",multiline:!0,minRows:2,...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"description_uz",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"To‘liq tavsif (UZ)",multiline:!0,minRows:2,...t})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(f.Qr,{name:"description_ru",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(S.Z,{fullWidth:!0,label:"To‘liq tavsif (RU)",multiline:!0,minRows:2,...t})}})}),(0,r.jsxs)(M.ZP,{item:!0,xs:12,md:6,children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:8},children:"Icon (rasm):"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:q}),B&&(0,r.jsx)("div",{style:{marginTop:8},children:(0,r.jsx)("img",{src:B,alt:"icon preview",style:{maxWidth:80,maxHeight:80,borderRadius:8}})})]}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"industries",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(C.Z,{multiple:!0,options:h||[],getOptionLabel:e=>e.name_uz||e.name||"",value:(null==h?void 0:h.filter(e=>{var n;return null===(n=t.value)||void 0===n?void 0:n.includes(e.id)}))||[],onChange:(e,n)=>t.onChange(n.map(e=>e.id)),renderInput:e=>(0,r.jsx)(S.Z,{...e,label:"Sanoat turlari"}),renderTags:(e,t)=>e.map((e,n)=>(0,r.jsx)(P.Z,{label:e.name_uz||e.name,...t({index:n})}))})}})}),(0,r.jsx)(M.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(f.Qr,{name:"equipment_categories",control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(C.Z,{multiple:!0,options:Z||[],getOptionLabel:e=>e.name_uz||e.name_en||"",value:(null==Z?void 0:Z.filter(e=>{var n;return null===(n=t.value)||void 0===n?void 0:n.includes(e.id)}))||[],onChange:(e,n)=>t.onChange(n.map(e=>e.id)),renderInput:e=>(0,r.jsx)(S.Z,{...e,label:"Jihoz kategoriyalari"}),renderTags:(e,t)=>e.map((e,n)=>(0,r.jsx)(P.Z,{label:e.name_uz||e.name_en,...t({index:n})}))})}})})]})}),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(x.Z,{type:"button",variant:"tonal",color:"secondary",onClick:n,disabled:m,children:"Bekor qilish"}),(0,r.jsx)(x.Z,{type:"submit",disabled:m,children:m?"Saqlanmoqda…":"Saqlash"})]})]})]})};var I=n(5861);let q=e=>{let{open:t,onClose:n,onConfirm:i,confirming:o,title:a,description:l}=e;return(0,r.jsxs)(v.Z,{open:t,onClose:o?void 0:n,fullWidth:!0,maxWidth:"xs",children:[(0,r.jsx)(b.Z,{children:a||"Xizmatni o‘chirishni tasdiqlang"}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(I.Z,{variant:"body2",children:l||"Bu amalni bekor qilib bo‘lmaydi. Haqiqatdan ham o‘chirmoqchimisiz?"})}),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(x.Z,{variant:"tonal",color:"secondary",onClick:n,disabled:!!o,children:"Bekor qilish"}),(0,r.jsx)(x.Z,{color:"error",onClick:()=>i(),disabled:!!o,children:o?"O‘chirilmoqda…":"O‘chirish"})]})]})};var R=n(2171),T=n(3730);let N=()=>(0,r.jsx)("span",{style:{fontWeight:"bold"},children:"＋"}),W=()=>{var e,t;let[n,f]=(0,i.useState)(0),[v,b]=(0,i.useState)(10),[y,_]=(0,i.useState)(""),{data:M,total:S,loading:C,mutate:P}=(0,z.z)(j.Z.services,{page:n+1,perPage:v,search:y}),[w,k]=(0,i.useState)(!1),[I,W]=(0,i.useState)("create"),[E,Q]=(0,i.useState)(null),[O,A]=(0,i.useState)(!1),L=()=>{W("create"),Q(null),k(!0)},X=e=>{W("edit"),Q(e),k(!0)},U=e=>{Q(e),A(!0)},F=async()=>{E&&(await g.D.delete(j.Z.serviceById(E.id)),P(),A(!1))};return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(a.Z,{title:"Xizmatlar",action:(0,r.jsx)(x.Z,{variant:"contained",startIcon:(0,r.jsx)(N,{}),onClick:L,children:"Yangi xizmat"})}),(0,r.jsx)(c.Z,{children:(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(u.Z,{children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(d.Z,{children:"Nomi (UZ)"}),(0,r.jsx)(d.Z,{children:"Nomi (EN)"}),(0,r.jsx)(d.Z,{children:"Nomi (RU)"}),(0,r.jsx)(d.Z,{children:"Slug"}),(0,r.jsx)(d.Z,{children:"Icon"}),(0,r.jsx)(d.Z,{children:"Tartib raqami"}),(0,r.jsx)(d.Z,{align:"right",children:"Amallar"})]})}),(0,r.jsx)(s.Z,{children:C?(0,r.jsx)(p.Z,{children:(0,r.jsx)(d.Z,{colSpan:6,align:"center",children:"Yuklanmoqda…"})}):M&&M.length>0?M.map(n=>(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(d.Z,{children:n.name_uz}),(0,r.jsx)(d.Z,{children:n.name_en}),(0,r.jsx)(d.Z,{children:n.name_ru}),(0,r.jsx)(d.Z,{children:n.slug}),(0,r.jsx)(d.Z,{children:(0,r.jsx)("img",{src:null!==(e=n.icon)&&void 0!==e?e:void 0,width:100,height:100,alt:null!==(t=n.name_uz)&&void 0!==t?t:"",style:{maxWidth:"100%",maxHeight:40,objectFit:"contain"}})}),(0,r.jsx)(d.Z,{children:n.order_index}),(0,r.jsx)(d.Z,{align:"right",children:(0,r.jsxs)(h.Z,{direction:"row",spacing:1,justifyContent:"flex-end",children:[(0,r.jsx)(Z.Z,{title:"Tahrirlash",children:(0,r.jsx)(m.Z,{size:"small",onClick:()=>X(n),children:(0,r.jsx)(T.Z,{icon:"tabler:edit"})})}),(0,r.jsx)(Z.Z,{title:"O‘chirish",children:(0,r.jsx)(m.Z,{size:"small",color:"error",onClick:()=>U(n),children:(0,r.jsx)(T.Z,{icon:"tabler:trash"})})})]})})]},n.id)):(0,r.jsx)(p.Z,{children:(0,r.jsx)(d.Z,{colSpan:7,align:"center",children:"Ma‘lumotlar yo‘q"})})})]})}),(0,r.jsx)(R.Z,{component:"div",count:S,page:n,onPageChange:(e,t)=>f(t),rowsPerPage:v,onRowsPerPageChange:e=>{b(parseInt(e.target.value,10)),f(0)},rowsPerPageOptions:[5,10,20,50]}),(0,r.jsx)(B,{open:w,onClose:()=>k(!1),onSaved:P,mode:I,item:E}),(0,r.jsx)(q,{open:O,onClose:()=>A(!1),onConfirm:F,title:"Xizmatni o‘chirishni tasdiqlang",description:E?"“".concat(E.name_uz,"” xizmatini o‘chirmoqchimisiz?"):void 0})]})},E=()=>(0,r.jsx)(W,{});E.acl={action:"read",subject:"cms"},E.authGuard=!0;var Q=E}},function(e){e.O(0,[41,886,903,203,631,536,895,171,153,702,774,888,179],function(){return e(e.s=3929)}),_N_E=e.O()}]);